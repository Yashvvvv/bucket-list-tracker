{
  "version": "1",
  "backend": {
    "phases": {
      "build": {
        "commands": [
          "npm ci --cache .npm --prefer-offline",
          "npx amplify pull --appId $AWS_APP_ID --envName staging",
          "npx amplify push --yes"
        ]
      }
    }
  },
  "frontend": {
    "phases": {
      "preBuild": {
        "commands": [
          "npm ci --cache .npm --prefer-offline"
        ]
      },
      "build": {
        "commands": [
          "npm run build"
        ]
      }
    },
    "artifacts": {
      "baseDirectory": "dist",
      "files": [
        "**/*"
      ]
    },
    "cache": {
      "paths": [
        "node_modules/**/*",
        ".npm/**/*"
      ]
    }
  }
}
